<?php

namespace App\Console\Commands;

use App\Products\Product;
use Illuminate\Console\Command;

class FixAffiliateLinks extends Command
{
    /**
     * The name and signature of the console command.
     *
     * @var string
     */
    protected $signature = 'patch:affiliate-links';

    /**
     * The console command description.
     *
     * @var string
     */
    protected $description = 'Updates affiliate link database';

    /**
     * Create a new command instance.
     *
     * @return void
     */
    public function __construct()
    {
        parent::__construct();
    }

    /**
     * Execute the console command.
     *
     * @return mixed
     */
    public function handle()
    {
        $links = '[{"id":1,"link":"http:\/\/www.amazon.es\/dp\/B002CM25V6\/?tag=derrochand0cc-21"},{"id":2,"link":"http:\/\/www.amazon.es\/dp\/B004CRYE2C\/?tag=derrochand0cc-21"},{"id":3,"link":"http:\/\/www.amazon.es\/dp\/B0185QIY12\/?tag=derrochand0cc-21"},{"id":4,"link":"http:\/\/www.amazon.es\/dp\/B015S1SET4\/?tag=derrochand0cc-21"},{"id":5,"link":"http:\/\/www.amazon.es\/dp\/B005QAIVZK\/?tag=derrochand0cc-21"},{"id":6,"link":"http:\/\/www.amazon.es\/dp\/B0077ANY7M\/?tag=derrochand0cc-21"},{"id":7,"link":"http:\/\/www.amazon.es\/dp\/B00B0FV4FE\/?tag=derrochand0cc-21"},{"id":8,"link":"http:\/\/www.amazon.es\/dp\/B00FAW08VE\/?tag=derrochand0cc-21"},{"id":9,"link":"http:\/\/www.amazon.es\/dp\/B007Z0YMS4\/?tag=derrochand0cc-21"},{"id":10,"link":"http:\/\/www.amazon.es\/dp\/B00QGK0710\/?tag=derrochand0cc-21"},{"id":11,"link":"http:\/\/www.amazon.es\/dp\/B00C8XS7CU\/?tag=derrochand0cc-21"},{"id":12,"link":"http:\/\/www.amazon.es\/dp\/B006YR6EK8\/?tag=derrochand0cc-21"},{"id":13,"link":"http:\/\/www.amazon.es\/dp\/B00JNBKZ5M\/?tag=derrochand0cc-21"},{"id":14,"link":"http:\/\/www.amazon.es\/dp\/B00CRWNBNM\/?tag=derrochand0cc-21"},{"id":15,"link":"http:\/\/www.amazon.es\/dp\/B007E7WQVS\/?tag=derrochand0cc-21"},{"id":16,"link":"http:\/\/www.amazon.es\/dp\/B0044POGH0\/?tag=derrochand0cc-21"},{"id":17,"link":"http:\/\/www.amazon.es\/dp\/B00QJQDDVM\/?tag=derrochand0cc-21"},{"id":18,"link":"http:\/\/www.amazon.es\/dp\/B00GTVTI84\/?tag=derrochand0cc-21"},{"id":19,"link":"http:\/\/www.amazon.es\/dp\/B00BT9WJLY\/?tag=derrochand0cc-21"},{"id":20,"link":"http:\/\/www.amazon.es\/dp\/B00MIPYTDY\/?tag=derrochand0cc-21"},{"id":21,"link":"http:\/\/www.amazon.es\/dp\/B000LV8YKQ\/?tag=derrochand0cc-21"},{"id":22,"link":"http:\/\/www.amazon.es\/dp\/B0177EQ59G\/?tag=derrochand0cc-21"},{"id":23,"link":"http:\/\/www.amazon.es\/dp\/B011O2M68Q\/?tag=derrochand0cc-21"},{"id":24,"link":"http:\/\/www.amazon.es\/dp\/B003CP0C12\/?tag=derrochand0cc-21"},{"id":25,"link":"http:\/\/www.amazon.es\/dp\/B00FWQVAQ0\/?tag=derrochand0cc-21"},{"id":26,"link":"http:\/\/www.amazon.es\/dp\/B00EFGHFT4\/?tag=derrochand0cc-21"},{"id":27,"link":"http:\/\/www.amazon.es\/dp\/B005SOG38G\/?tag=derrochand0cc-21"},{"id":28,"link":"http:\/\/www.amazon.es\/dp\/B00DKR7936\/?tag=derrochand0cc-21"},{"id":29,"link":"http:\/\/www.amazon.es\/dp\/B00C0S8304\/?tag=derrochand0cc-21"},{"id":30,"link":"http:\/\/www.amazon.es\/dp\/B00SPXLBNY\/?tag=derrochand0cc-21"},{"id":31,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=2401&wgtarget=http:\/\/www.curiosite.es\/producto\/lampara-de-noche-para-el-smartphone.html"},{"id":32,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=2401&wgtarget=http:\/\/www.curiosite.es\/producto\/adaptador-para-auriculares-conejo.html"},{"id":33,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=2401&wgtarget=http:\/\/www.curiosite.es\/producto\/tartera-metalica-funda-de-guitarra.html"},{"id":34,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=2401&wgtarget=http:\/\/www.curiosite.es\/producto\/filtro-polarizador-para-smartphones-smartpro.html"},{"id":35,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=2401&wgtarget=http:\/\/www.curiosite.es\/producto\/colgantes-star-wars.html"},{"id":36,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=2401&wgtarget=http:\/\/www.curiosite.es\/producto\/taza-que-cambia-de-color-oso-panda.html"},{"id":37,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=2401&wgtarget=http:\/\/www.curiosite.es\/producto\/monedero-osito-3d-pochi-friends.html"},{"id":38,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=2401&wgtarget=http:\/\/www.curiosite.es\/producto\/maceta-con-autorriego-kawaii-peropon.html"},{"id":39,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=2401&wgtarget=http:\/\/www.curiosite.es\/producto\/lapiz-escoba.html"},{"id":40,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=2401&wgtarget=http:\/\/www.curiosite.es\/producto\/cubo-de-rubik-con-luz.html"},{"id":41,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=2401&wgtarget=http:\/\/www.curiosite.es\/producto\/ensaladera-panda.html"},{"id":42,"link":"http:\/\/www.amazon.es\/dp\/B007ML0ZAK\/?tag=derrochand0cc-21"},{"id":43,"link":"http:\/\/www.amazon.es\/dp\/B0082Q159E\/?tag=derrochand0cc-21"},{"id":44,"link":"http:\/\/www.amazon.es\/dp\/B00P7847MC\/?tag=derrochand0cc-21"},{"id":45,"link":"http:\/\/www.amazon.es\/dp\/B00SMGBU7G\/?tag=derrochand0cc-21"},{"id":46,"link":"http:\/\/www.amazon.es\/dp\/B00A3A02SC\/?tag=derrochand0cc-21"},{"id":47,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=9965&wgtarget=http:\/\/www.factoriaderegalos.com\/4-capsulas-romanticas-con-mensajelo-mejor-para-el-corazon\/"},{"id":48,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=9965&wgtarget=http:\/\/www.factoriaderegalos.com\/kit-para-ser-feliz-como-una-perdiz-un-acertadisimo-regalo\/"},{"id":49,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=9965&wgtarget=http:\/\/www.factoriaderegalos.com\/infusor-te-robot-se-adapta-a-la-altura-que-quieras\/"},{"id":50,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=9965&wgtarget=http:\/\/www.factoriaderegalos.com\/mapa-mundi-de-corcho-adhesivo-para-tus-recuerdos-viajeros\/"},{"id":51,"link":"http:\/\/www.amazon.es\/dp\/B00865QRGW\/?tag=derrochand0cc-21"},{"id":52,"link":"http:\/\/www.amazon.es\/dp\/B018U1OESO\/?tag=derrochand0cc-21"},{"id":53,"link":"http:\/\/www.amazon.es\/dp\/8427040946\/?tag=derrochand0cc-21"},{"id":54,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=2401&wgtarget=http:\/\/www.curiosite.es\/producto\/delantal-star-wars-de-darth-vader.html"},{"id":55,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=2401&wgtarget=http:\/\/www.curiosite.es\/producto\/lanzador-de-pelotas-para-perros-ifetch.html"},{"id":56,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=2401&wgtarget=http:\/\/www.curiosite.es\/producto\/mascara-cabeza-de-pato-silvestre.html"},{"id":57,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=2401&wgtarget=http:\/\/www.curiosite.es\/producto\/cojin-jamon-iberico-de-bellota.html"},{"id":58,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=2401&wgtarget=http:\/\/www.curiosite.es\/producto\/tienda-de-campana-furgoneta-camper-de-volkswagen.html"},{"id":59,"link":"http:\/\/www.factoriaderegalos.com\/no-falla-el-mejor-regalo-que-puedes-hacer-a-cualquiera\/?source=webgains&siteid=190819"},{"id":60,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=9965&wgtarget=http:\/\/www.curiosite.es\/producto\/arbol-magico-que-florece-sakura.html"},{"id":61,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=9965&wgtarget=http:\/\/www.curiosite.es\/producto\/escurridor-de-cubiertos-jumbo.html"},{"id":62,"link":"https:\/\/www.vat19.com\/item\/gummy-pizza-in-a-box?"},{"id":63,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=9965&wgtarget=http:\/\/www.curiosite.es\/producto\/funda-para-llaves-comecocos.html"},{"id":64,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=2401&wgtarget=http:\/\/www.curiosite.es\/producto\/auriculares-gusanos.html"},{"id":65,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=2401&wgtarget=http:\/\/www.curiosite.es\/producto\/balon-de-futbol-gigante.html"},{"id":66,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=2401&wgtarget=http:\/\/www.curiosite.es\/producto\/sphero-20-bola-robotica.html"},{"id":67,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=2401&wgtarget=http:\/\/www.curiosite.es\/producto\/frisbee-pizza--donut--disco-de-vinilo.html"},{"id":68,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=2401&wgtarget=http:\/\/www.curiosite.es\/producto\/avion-de-papel-controlado-por-smartphone-powerup-30.html"},{"id":69,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=2401&wgtarget=http:\/\/www.curiosite.es\/producto\/bloques-de-construccion-de-carton-xxl.html"},{"id":70,"link":"https:\/\/ad.zanox.com\/ppc\/?37234259C655268832&ulp=[[https:\/\/www.etsy.com\/es\/listing\/264949468\/harry-potter-hogwarts-trunk-inspired]]"},{"id":71,"link":"https:\/\/ad.zanox.com\/ppc\/?37234259C655268832&ulp=[[https:\/\/www.etsy.com\/es\/listing\/233351778\/replica-full-leather-or-cordura-deadpool]]"},{"id":72,"link":"https:\/\/ad.zanox.com\/ppc\/?37234259C655268832&ulp=[[https:\/\/www.etsy.com\/es\/listing\/256992072\/regalo-pequeno-salud-y-mana-potion?ga_order=most_relevant&ga_search_type=all&ga_view_type=gallery&ga_search_query=mana%20potion&ref=sr_gallery_2]]"},{"id":73,"link":"https:\/\/ad.zanox.com\/ppc\/?37234259C655268832&ulp=[[https:\/\/www.etsy.com\/es\/listing\/159511438\/magnetic-bottle-opener-dropcatch-porter]]"},{"id":74,"link":"https:\/\/ad.zanox.com\/ppc\/?37234259C655268832&ulp=[[https:\/\/www.etsy.com\/es\/listing\/239935977\/handmade-large-scrabble-tile-home]]"},{"id":75,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=2401&wgtarget=http:\/\/www.curiosite.es\/producto\/barbacoa-sin-humo-lotusgrill.html"},{"id":76,"link":"http:\/\/www.amazon.es\/dp\/B00EVS6QXW\/?tag=derrochand0cc-21"},{"id":77,"link":"http:\/\/www.amazon.es\/dp\/B00OTPFM14\/?tag=derrochand0cc-21"},{"id":78,"link":"http:\/\/www.amazon.es\/dp\/B0092OEULU\/?tag=derrochand0cc-21"},{"id":79,"link":"http:\/\/www.amazon.es\/dp\/B013ODLEE0\/?tag=derrochand0cc-21"},{"id":80,"link":"http:\/\/www.amazon.es\/dp\/B00W3J2KIQ\/?tag=derrochand0cc-21"},{"id":81,"link":"http:\/\/www.amazon.es\/dp\/B00N7RB2M8\/?tag=derrochand0cc-21"},{"id":82,"link":"http:\/\/www.amazon.es\/dp\/B015JJ28AG\/?tag=derrochand0cc-21"},{"id":83,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=2401&wgtarget=http:\/\/www.curiosite.es\/producto\/haz-tu-propio-reloj.html"},{"id":84,"link":"http:\/\/www.amazon.es\/dp\/B00EPFNBXY\/?tag=derrochand0cc-21"},{"id":85,"link":"http:\/\/www.amazon.es\/dp\/B00B7K0DFY\/?tag=derrochand0cc-21"},{"id":86,"link":"https:\/\/ad.zanox.com\/ppc\/?37234259C655268832&ulp=[[https:\/\/www.etsy.com\/es\/listing\/252962456\/ms-pac-man-3d-shadow-box-8x10]]"},{"id":87,"link":"https:\/\/ad.zanox.com\/ppc\/?37234259C655268832&ulp=[[https:\/\/www.etsy.com\/es\/listing\/256927616\/lego-party-favors-lego-candy-lego-party]]"},{"id":88,"link":"https:\/\/ad.zanox.com\/ppc\/?37234259C655268832&ulp=[[https:\/\/www.etsy.com\/es\/listing\/264690880\/metal-gear-solid-diamond-dogs-dd-solid]]"},{"id":89,"link":"https:\/\/ad.zanox.com\/ppc\/?37234259C655268832&ulp=[[https:\/\/www.etsy.com\/es\/listing\/229301339\/cat-bed-cat-housecat-cavefelted-cat-bed]]"},{"id":90,"link":"https:\/\/ad.zanox.com\/ppc\/?37234259C655268832&ulp=[[https:\/\/www.etsy.com\/es\/listing\/123028340\/dead-bookmark-unusual-art-bookmarkhttps:\/\/www.etsy.com\/es\/listing\/123028340\/dead-bookmark-unusual-art-bookmark]]"},{"id":91,"link":"http:\/\/www.amazon.es\/dp\/B00N3FY460\/?tag=derrochand0cc-21"},{"id":93,"link":"http:\/\/www.amazon.es\/dp\/B00VBA4MZ2\/?tag=derrochand0cc-21"},{"id":94,"link":"http:\/\/www.amazon.es\/dp\/B00GKC6KHO\/?tag=derrochand0cc-21"},{"id":95,"link":"http:\/\/www.amazon.es\/dp\/B00B4S6SLW\/?tag=derrochand0cc-21"},{"id":96,"link":"http:\/\/www.amazon.es\/dp\/B01C7825B4\/?tag=derrochand0cc-21"},{"id":97,"link":"http:\/\/www.amazon.es\/dp\/B00606DVZ4\/?tag=derrochand0cc-21"},{"id":98,"link":"https:\/\/ad.zanox.com\/ppc\/?37234259C655268832&ulp=[[https:\/\/www.etsy.com\/es\/listing\/96236038\/plain-slice-of-pizza-sleeping-bag]]"},{"id":99,"link":"https:\/\/ad.zanox.com\/ppc\/?37234259C655268832&ulp=[[https:\/\/www.etsy.com\/es\/listing\/266812232\/mario-cat-complex-20https:\/\/www.etsy.com\/es\/listing\/266812232\/mario-cat-complex-20]]"},{"id":100,"link":"http:\/\/www.amazon.es\/dp\/B004RP3ZQU\/?tag=derrochand0cc-21"},{"id":101,"link":"http:\/\/www.amazon.es\/dp\/B005CUZ24C\/?tag=derrochand0cc-21"},{"id":102,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=2401&wgtarget=http:\/\/www.curiosite.es\/producto\/horquilla-herramienta-multiusos-clippa.html"},{"id":103,"link":"http:\/\/www.amazon.es\/dp\/B008205VV8\/?tag=derrochand0cc-21"},{"id":104,"link":"http:\/\/www.amazon.es\/dp\/B001JU31MO\/?tag=derrochand0cc-21"},{"id":105,"link":"http:\/\/www.amazon.es\/dp\/B00BNARRDO\/?tag=derrochand0cc-21"},{"id":106,"link":"http:\/\/www.amazon.es\/dp\/3836551632\/?tag=derrochand0cc-21"},{"id":107,"link":"http:\/\/www.amazon.es\/dp\/B00F99WO2Y\/?tag=derrochand0cc-21"},{"id":108,"link":"http:\/\/www.amazon.es\/dp\/B00LVQSHGQ\/?tag=derrochand0cc-21"},{"id":109,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=2401&wgtarget=http:\/\/www.curiosite.es\/producto\/lampara-batman-eclipse.html"},{"id":110,"link":"http:\/\/www.amazon.es\/dp\/B007ZZCSOY\/?tag=derrochand0cc-21"},{"id":111,"link":"http:\/\/www.amazon.es\/dp\/1477468528\/?tag=derrochand0cc-21"},{"id":112,"link":"http:\/\/www.amazon.es\/dp\/B00BZZAOSW\/?tag=derrochand0cc-21"},{"id":113,"link":"http:\/\/www.amazon.es\/dp\/B00NI2PDC2\/?tag=derrochand0cc-21"},{"id":114,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=2401&wgtarget=http:\/\/www.curiosite.es\/producto\/ceras-de-colores-crayon-rocks-64-colores.html"},{"id":115,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=2401&wgtarget=http:\/\/www.curiosite.es\/producto\/tarros-luminosos-fairy-jars.html"},{"id":116,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=2401&wgtarget=http:\/\/www.curiosite.es\/producto\/pulseras-playmobil-ella-y-el.html"},{"id":117,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=2401&wgtarget=http:\/\/www.curiosite.es\/producto\/silla-para-bicicleta-portabebes-weeride.html"},{"id":118,"link":"http:\/\/www.amazon.es\/dp\/B0080HZH5I\/?tag=derrochand0cc-21"},{"id":119,"link":"http:\/\/www.amazon.es\/dp\/B001F2B3P8\/?tag=derrochand0cc-21"},{"id":120,"link":"http:\/\/www.amazon.es\/dp\/B01B8KPZ7S\/?tag=derrochand0cc-21"},{"id":121,"link":"http:\/\/www.amazon.es\/dp\/B005OSB0WA\/?tag=derrochand0cc-21"},{"id":122,"link":"https:\/\/ad.zanox.com\/ppc\/?37234259C655268832&ulp=[[https:\/\/www.etsy.com\/es\/listing\/227341157\/pequeno-bebe-groot-miniatura-figurita]]"},{"id":123,"link":"http:\/\/www.amazon.es\/dp\/B018ZUMQNA\/?tag=derrochand0cc-21"},{"id":125,"link":"http:\/\/www.amazon.es\/dp\/B01ENN40YG\/?tag=derrochand0cc-21"},{"id":126,"link":"http:\/\/www.amazon.es\/dp\/B000SSV8AA\/?tag=derrochand0cc-21"},{"id":127,"link":"http:\/\/www.amazon.es\/dp\/B01DO4JDB0\/?tag=derrochand0cc-21"},{"id":128,"link":"http:\/\/www.amazon.es\/dp\/1479129836\/?tag=derrochand0cc-21"},{"id":129,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=2401&wgtarget=http:\/\/www.curiosite.es\/producto\/intermitentes-para-bicicleta-magneticos.html"},{"id":130,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=2401&wgtarget=http:\/\/www.curiosite.es\/producto\/napoleon-solar.html"},{"id":131,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=2401&wgtarget=http:\/\/www.curiosite.es\/producto\/pelota-antiestres-paul-estresado.html"},{"id":132,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=2401&wgtarget=http:\/\/www.curiosite.es\/producto\/poster-para-colorear-gigante-atlas.html"},{"id":133,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=9965&wgtarget=http:\/\/www.factoriaderegalos.com\/bandeja-de-descongelacion-rapida-la-utilizaras-casi-a-diario\/"},{"id":134,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=9965&wgtarget=http:\/\/www.factoriaderegalos.com\/una-delicia-bandeja-de-chuches-con-forma-de-sushi\/"},{"id":135,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=9965&wgtarget=http:\/\/www.factoriaderegalos.com\/globos-luminosos-para-celebraciones\/"},{"id":136,"link":"https:\/\/ad.zanox.com\/ppc\/?37234259C655268832&ulp=[[https:\/\/www.etsy.com\/es\/listing\/271942684\/tamanos-mas-grandes-y-envio-del-dia?ga_order=most_relevant&ga_search_type=all&ga_view_type=gallery&ga_search_query=pokemon&ref=sr_gallery_43]]"},{"id":137,"link":"http:\/\/www.amazon.es\/dp\/B014R3YB3W\/?tag=derrochand0cc-21"},{"id":138,"link":"https:\/\/ad.zanox.com\/ppc\/?37234259C655268832&ulp=[[https:\/\/www.etsy.com\/es\/listing\/218242055\/tabla-periodica-con-motivos-bow-pajarita?ga_order=most_relevant&ga_search_type=all&ga_view_type=gallery&ga_search_query=PAJARITA%20TABLA&ref=sr_gallery_22]]"},{"id":139,"link":"http:\/\/www.amazon.es\/dp\/B013C11V0Q\/?tag=derrochand0cc-21"},{"id":140,"link":"http:\/\/www.amazon.es\/dp\/B00NIG140S\/?tag=derrochand0cc-21"},{"id":141,"link":"http:\/\/www.amazon.es\/dp\/B002KMK060\/?tag=derrochand0cc-21"},{"id":142,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=11429&wgtarget=https:\/\/www.juguetronica.com\/bola-plasma-xl"},{"id":143,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=11429&wgtarget=https:\/\/www.juguetronica.com\/digichicks-pollitos-cantarines"},{"id":144,"link":"http:\/\/www.amazon.es\/dp\/B00DUUQUUQ\/?tag=derrochand0cc-21"},{"id":145,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=2401&wgtarget=http:\/\/www.curiosite.es\/producto\/boligrafo-multifuncion-tek-pen-20.html"},{"id":146,"link":"http:\/\/www.amazon.es\/dp\/B00U7DI3CM\/?tag=derrochand0cc-21"},{"id":147,"link":"http:\/\/www.amazon.es\/dp\/B0050R0XEG\/?tag=derrochand0cc-21"},{"id":148,"link":"http:\/\/www.amazon.es\/dp\/B009T7E196\/?tag=derrochand0cc-21"},{"id":149,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=2401&wgtarget=http:\/\/www.curiosite.es\/producto\/kit-de-reparacion-de-gafas.html"},{"id":150,"link":"http:\/\/www.amazon.es\/dp\/B01DDNB0K4\/?tag=derrochand0cc-21"},{"id":151,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=2401&wgtarget=http:\/\/www.curiosite.es\/producto\/teclado-portatil-plegable-origami.html"},{"id":152,"link":"http:\/\/www.amazon.es\/dp\/B015546L26\/?tag=derrochand0cc-21"},{"id":153,"link":"http:\/\/www.amazon.es\/dp\/B015E2S8CU\/?tag=derrochand0cc-21"},{"id":154,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=2401&wgtarget=http:\/\/www.curiosite.es\/producto\/luz-de-luna-moonlight.html"},{"id":155,"link":"http:\/\/www.amazon.es\/dp\/B013E5BJBQ\/?tag=derrochand0cc-21"},{"id":156,"link":"http:\/\/www.amazon.es\/dp\/B00U8PTM56\/?tag=derrochand0cc-21"},{"id":157,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=2401&wgtarget=http:\/\/www.curiosite.es\/producto\/calendario-de-vida-amorosa.html"},{"id":158,"link":"http:\/\/www.amazon.es\/dp\/B01562S5R6\/?tag=derrochand0cc-21"},{"id":159,"link":"http:\/\/www.amazon.es\/dp\/B005V0AJNM\/?tag=derrochand0cc-21"},{"id":160,"link":"http:\/\/www.amazon.es\/dp\/B00BUI7HFC\/?tag=derrochand0cc-21"},{"id":161,"link":"http:\/\/www.amazon.es\/dp\/8448009975\/?tag=derrochand0cc-21"},{"id":162,"link":"http:\/\/www.amazon.es\/dp\/B01EFL3FE2\/?tag=derrochand0cc-21"},{"id":163,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=2401&wgtarget=http:\/\/www.curiosite.es\/producto\/taza-existencialista-ya-no-eres-joven.html"},{"id":164,"link":"http:\/\/www.amazon.es\/dp\/B0145I1GIM\/?tag=derrochand0cc-21"},{"id":165,"link":"http:\/\/www.amazon.es\/dp\/B00FL0KLSA\/?tag=derrochand0cc-21"},{"id":166,"link":"http:\/\/www.amazon.es\/dp\/B016X8DFLS\/?tag=derrochand0cc-21"},{"id":167,"link":"http:\/\/www.amazon.es\/dp\/B00YWOLP9U\/?tag=derrochand0cc-21"},{"id":168,"link":"http:\/\/www.amazon.es\/dp\/B01CL9802W\/?tag=derrochand0cc-21"},{"id":169,"link":"http:\/\/www.amazon.es\/dp\/B016QQJD22\/?tag=derrochand0cc-21"},{"id":170,"link":"http:\/\/www.amazon.es\/dp\/B015T71LI8\/?tag=derrochand0cc-21"},{"id":171,"link":"http:\/\/www.amazon.es\/dp\/B00MWZZBOG\/?tag=derrochand0cc-21"},{"id":172,"link":"http:\/\/www.amazon.es\/dp\/B007BPE3J6\/?tag=derrochand0cc-21"},{"id":173,"link":"http:\/\/www.amazon.es\/dp\/B00FR8F4CO\/?tag=derrochand0cc-21"},{"id":174,"link":"http:\/\/www.amazon.es\/dp\/B010F8ZEYI\/?tag=derrochand0cc-21"},{"id":175,"link":"http:\/\/track.webgains.com\/click.html?wgcampaignid=190819&wgprogramid=2401&wgtarget=http:\/\/www.curiosite.es\/producto\/enfriador-de-cerveza-chillsner.html"}]';

        foreach (json_decode($links) as $link) {
            $product = Product::find($link->id);

            $product->link = $this->fixLink($link->link);

            $product->save();
        }
    }

    private function fixLink($link)
    {
        //Amazon
        $link = str_replace('/?tag=derrochand0cc-21', '',$link);
        //Etsy
        $link = str_replace('https://ad.zanox.com/ppc/?37234259C655268832&ulp=[[', '',$link);
        //Curiosite
        $link = str_replace('http://track.webgains.com/click.html?wgcampaignid=190819&wgprogramid=2401&wgtarget=', '',$link);
        //Juguetrónica
        $link = str_replace('http://track.webgains.com/click.html?wgcampaignid=190819&wgprogramid=11429&wgtarget=', '',$link);
        //Factoría de Regalos
        $link = str_replace('http://track.webgains.com/click.html?wgcampaignid=190819&wgprogramid=9965&wgtarget=', '',$link);
        //Cierre WebGains
        $link = str_replace(']]', '',$link);

        return $link;
    }
}
